/* ===========================
   グローバル設定
   =========================== */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    /* Rogue clone default colors: "cbmyg" */
    --bg-color: #000000;
    --text-color: #cccccc;
    /* デフォルト文字色は白/グレー系 */
    --border-color: #00aa00;
    --highlight-color: #ffffff;

    --wall-color: #ff8000;
    /* EGA brown */
    --passage-color: #808080;
    /* gray */
    --floor-color: #0000ff;
    /* blue */
    --player-color: #00ff00;
    /* green */
    --monster-color: #ff00ff;
    /* magenta */
    --item-color: #ffff00;
    /* yellow */
    --gold-color: #ffff00;
    /* yellow */
    --trap-color: #ff0000;
    /* red */
}

body {
    font-family: 'Noto Sans Mono', monospace;
    background-color: var(--bg-color);
    color: var(--text-color);
    line-height: 1.4;
    overflow: auto;
    /* コンテンツが大きければスクロールさせる */
    display: flex;
    justify-content: center;
    align-items: flex-start;
    /* 上寄せにする */
    min-height: 100vh;
    padding: 1rem;
    /* 画面端との余白 */
}

/* ===========================
   ゲームコンテナ
   =========================== */
#game-container {
    width: auto;
    /* 中身に合わせて広がる */
    /* max-width: 1200px;  削除: 幅制限をなくす */
    height: auto;
    min-height: 90vh;
    display: flex;
    flex-direction: column;
    position: relative;
}

/* ===========================
   画面切り替え
   =========================== */
.screen {
    display: none;
    width: 100%;
    height: 100%;
}

.screen.active {
    display: flex;
    flex-direction: column;
}

/* game-main内のビュー切り替え */
.game-view {
    display: none !important;
    width: 100%;
    height: 100%;
}

.game-view.active {
    display: block !important;
}

/* ===========================
   タイトル画面
   =========================== */
#title-content {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
}

#title-art {
    color: var(--text-color);
    text-align: left;
    font-family: 'Noto Sans Mono', monospace;
    font-size: 16px;
    /* 固定サイズ */
    letter-spacing: 0.1em;
    line-height: 1.2;
    white-space: pre;
    font-variant-ligatures: none;
    font-feature-settings: "liga" 0;
}

#tombstone-display,
#ranking-display,
#victory-display,
#selling-display {
    color: #fff;
    text-align: left;
    font-family: 'Noto Sans Mono', monospace;
    font-size: 16px;
    /* 固定サイズ */
    letter-spacing: 0.1em;
    line-height: 1.2;
    white-space: pre;
    font-variant-ligatures: none;
    font-feature-settings: "liga" 0;
}

/* ===========================
   ゲーム画面
   =========================== */
#game-screen {
    padding: 0;
    /* 余白削除 */
    height: 100%;
}

/* 左右分割レイアウト */
#game-layout {
    display: flex;
    gap: 2rem;
    /* パネル間の余白を少し広げる */
    height: 100%;
}

#left-panel {
    flex: 0 0 auto;
    /* 縮小させない！ */
    display: flex;
    flex-direction: column;
}

#right-panel {
    width: 350px;
    background-color: transparent;
    /* 背景なし */
    border-left: 1px solid var(--border-color);
    /* 区切り線だけ左に */
    border-top: none;
    border-right: none;
    border-bottom: none;
    padding: 0 1rem;
    display: flex;
    flex-direction: column;
}

/* ... (中略) ... */

#inventory-list li span:last-child {
    /* アイテム名はそのまま */
}

/* アイテムステータス部分のスタイル */
.item-status {
    min-width: 4ch;
    max-width: 4ch;
    /* 4文字固定幅 (装備2ch + 投げ1ch + 呪い1ch) */
    margin-right: 0.2rem;
    white-space: pre;
}

.panel-header {
    color: var(--highlight-color);
    font-weight: bold;
    border-bottom: 1px solid var(--border-color);
    padding-bottom: 0.5rem;
    margin-bottom: 0.5rem;
    text-align: center;
}

/* メッセージログ */
/* メッセージログ */
#message-area {
    /* 背景・枠線を削除 */
    background-color: transparent;
    border: none;
    padding: 0;
    margin-bottom: 0.5rem;
    height: 6rem;
    /* 余裕を持たせる */
    overflow: hidden;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
}

#message-log {
    list-style: none;
    margin: 0;
    padding: 0;
}

#message-log li {
    line-height: 1.2;
    /* 行間を詰める */
    padding: 0;
}

.current-message {
    color: var(--highlight-color);
    font-weight: bold;
    font-size: 1.1rem;
}

.old-message {
    color: var(--text-color);
    opacity: 0.7;
    font-size: 1.1rem;
    /* サイズは変えない */
}

/* ダンジョン表示 */
#game-main {
    flex: 0 0 auto;
    /* レイアウト固定のためのサイズ指定 (全域表示用) */
    width: 72rem;
    height: 45rem;
    margin-bottom: 0.5rem;
    background-color: transparent;
    border: none;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
}

#dungeon-display {
    line-height: 1.2;
    letter-spacing: 0.1em;
    color: var(--text-color);
    white-space: pre;
    font-family: 'Noto Sans Mono', monospace;
    font-size: 1.1rem;
    /* 固定サイズ(大) */
}

/* 拡大表示用 */

/* ダンジョン要素の色分け */
.wall {
    color: #000000;
    background-color: var(--wall-color);
    font-weight: bold;
}

.passage {
    color: var(--passage-color);
}

.player {
    color: var(--player-color);
    font-weight: bold;
}

.monster {
    color: var(--monster-color);
    font-weight: bold;
}

.item {
    color: var(--item-color);
}

.gold {
    color: var(--gold-color);
    font-weight: bold;
}

.floor {
    color: var(--floor-color);
}

.door {
    color: var(--wall-color);
    font-weight: bold;
}

.stairs {
    color: #00ff00;
    /* green */
    font-weight: bold;
}

.target-cursor {
    background-color: var(--monster-color);
    color: #ffffff;
    animation: blink 0.5s step-end infinite alternate;
}

@keyframes blink {
    50% {
        opacity: 0.8;
    }
}

/* ステータスバー */
/* ステータスバー */
#status-bar {
    background-color: transparent;
    border: none;
    /* 枠線削除 */
    border-top: 1px solid var(--border-color);
    /* 上に区切り線 */
    padding: 0.5rem 0;

    /* 位置固定のため Grid レイアウトに変更 */
    display: grid;
    /* 
       階:XX (5em)
       金貨:XXXXXX (10em)
       Hp:XXX(XXX) (12em)
       強さ:XX(XX) (11em)
       守備:XX (7em)
       経験:XX/XXXXXXXX (13em)
       空腹 (3em)
       状態異常 (残り)
    */
    grid-template-columns: 4.5em 9em 11em 10em 6.5em 13em 3em 1fr;
    align-items: center;

    font-size: 1rem;
    white-space: nowrap;
    /* 折り返し禁止 */
    overflow-x: auto;
    /* 幅が足りない場合はスクロール */
    /* 幅が足りない場合はスクロール */
}

#status-conditions {
    justify-self: end;
    /* 右端に寄せる */
    padding-right: 0.5em;
    /* text-align: right; */
}

/* インベントリリスト */
#inventory-list {
    list-style: none;
    overflow-y: auto;
    flex: 1;
    display: flex;
    flex-direction: column;
    /* 等幅フォントで整形 */
    font-family: 'Noto Sans Mono', monospace;
}

#inventory-list li {
    padding: 0.3rem 0;
    border-bottom: 1px solid rgba(0, 170, 0, 0.3);
    color: var(--text-color);
    font-size: 0.9rem;
    display: flex;
    align-items: center;
}

.item-status {
    min-width: 4ch;
    max-width: 4ch;
    /* 4文字固定幅 (装備2ch + 投げ1ch + 呪い1ch) */
    margin-right: 0.2rem;
    white-space: pre;
}

/* 足元アイテム（下寄せ） */
#inventory-list li.at-feet-item {
    margin-top: auto;
    border-top: 2px dashed var(--border-color);
    border-bottom: none;
    padding-top: 0.5rem;
    background-color: rgba(0, 100, 0, 0.1);
    margin-bottom: 2px;
}

/* 呪われたアイテム（赤色） */
#inventory-list li.cursed-item {
    color: #ff4444;
}

/* プラスのエンチャント値を持つアイテム（黄色） */
#inventory-list li.enchanted-item {
    color: #ffdd44;
}

/* ===========================
   メニュー画面
   =========================== */
#menu-screen,
#config-screen {
    justify-content: center;
    align-items: center;
    background-color: rgba(0, 0, 0, 0.95);
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: 2000;
}

.menu-content {
    border: 3px solid var(--border-color);
    padding: 2rem;
    background-color: var(--bg-color);
    min-width: 400px;
}

.menu-content h2 {
    color: var(--highlight-color);
    margin-bottom: 1.5rem;
    text-align: center;
    font-size: 1.5rem;
}

#menu-list {
    list-style: none;
}

#menu-list li {
    padding: 0.8rem 1rem;
    margin-bottom: 0.5rem;
    border: 1px solid var(--border-color);
    cursor: pointer;
    transition: all 0.2s;
}

#menu-list li:hover,
#menu-list li.selected {
    background-color: var(--border-color);
    color: var(--bg-color);
    transform: translateX(10px);
}

/* ===========================
   キーコンフィグ画面
   =========================== */
#key-config-list {
    margin-bottom: 1.5rem;
}

.key-config-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.8rem;
    margin-bottom: 0.5rem;
    border: 1px solid var(--border-color);
}

.key-config-item label {
    flex: 1;
}

.key-config-item button {
    padding: 0.5rem 1rem;
    background-color: transparent;
    border: 1px solid var(--border-color);
    color: var(--text-color);
    font-family: 'Noto Sans Mono', monospace;
    cursor: pointer;
    transition: all 0.2s;
}

.key-config-item button:hover {
    background-color: var(--border-color);
    color: var(--bg-color);
}

#config-back {
    width: 100%;
    padding: 0.8rem;
    background-color: transparent;
    border: 2px solid var(--border-color);
    color: var(--text-color);
    font-family: 'Noto Sans Mono', monospace;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.2s;
}

#config-back:hover {
    background-color: var(--border-color);
    color: var(--bg-color);
}

/* ===========================
   レスポンシブ対応
   =========================== */
@media (max-width: 768px) {
    body {
        font-size: 14px;
    }

    #dungeon-display {
        font-size: 0.7rem;
    }

    #status-bar {
        font-size: 0.7rem;
        gap: 0.5rem;
    }

    .menu-content {
        min-width: 90%;
        padding: 1.5rem;
    }
}

/* ===========================
   スクロールバーのスタイル
   =========================== */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: var(--bg-color);
}

::-webkit-scrollbar-thumb {
    background: var(--border-color);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--text-color);
}

/* ===========================
   インベントリ選択・サブメニュー
   =========================== */
#inventory-list li.selected {
    background-color: var(--border-color);
    color: var(--bg-color);
    font-weight: bold;
}

#submenu {
    position: absolute;
    background-color: var(--bg-color);
    border: 2px solid var(--highlight-color);
    padding: 0;
    z-index: 1000;
    min-width: 120px;
    box-shadow: 4px 4px 0px rgba(0, 0, 0, 0.5);
}

#submenu-list {
    list-style: none;
    margin: 0;
    padding: 0;
}

#submenu-list li {
    padding: 0.5rem 1rem;
    cursor: pointer;
    border-bottom: 1px solid #333;
}

#submenu-list li:last-child {
    border-bottom: none;
}

#submenu-list li.selected,
#submenu-list li:hover {
    background-color: var(--highlight-color);
    color: var(--bg-color);
}

#submenu.hidden {
    display: none;
}

/* ===========================
   罠スタイル
   =========================== */
.trap {
    color: var(--trap-color);
    font-weight: bold;
}

/* ===========================
   炎エフェクト (Dragon FLAMES)
   =========================== */
.flame-effect {
    color: #ff4500;
    /* オレンジレッド */
    font-weight: bold;
    text-shadow: 0 0 5px #ff0000;
}

/* ===========================
   UI枠線スタイルの上書き (枠線化)
   =========================== */
#right-panel {
    border: 1px solid var(--border-color);
    padding: 1rem;
}

#status-bar {
    border: 1px solid var(--border-color);
    margin-top: 0.5rem;
    padding: 0.5rem;
}

#message-area {
    border: 1px solid var(--border-color);
    padding: 0.5rem;
}

/* キー設定画面のスタイル */
#key-config-list {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px 20px;
    width: 100%;
    margin-bottom: 2rem;
    padding: 0 2rem;
}

.config-label {
    text-align: center;
    /* 中央揃えに変更 */
    font-size: 1.1rem;
    align-self: center;
    padding: 2px 8px;
    border-radius: 4px;
    margin-right: 8px;
    width: fit-content;
    /* 幅を文字に合わせる */
    justify-self: end;
    /* gridセル内で右寄せ */
}

/* SFC風ボタンカラー */
.btn-a {
    background-color: #ff4444;
    color: black;
}

.btn-b {
    background-color: #ffeb3b;
    color: black;
}

.btn-x {
    background-color: #4488ff;
    color: black;
}

.btn-y {
    background-color: #44ff44;
    color: black;
}

.btn-lr {
    background-color: #cccccc;
    color: black;
}

.config-value {
    text-align: left;
    align-self: center;
}

.config-key-display {
    display: inline-block;
    border: 1px solid #aaa;
    padding: 4px 12px;
    min-width: 80px;
    text-align: center;
    background-color: rgba(0, 0, 0, 0.5);
    color: #fff;
    font-family: monospace;
}

/* キー設定画面のスタイル追加 */
/* キー設定画面のスタイル追加 */
.config-value {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 0.2rem 0.5rem;
    /* 選択時の背景が見えるように少しパディング */
    transition: all 0.2s;
}

.config-change-btn {
    padding: 2px 10px;
    background: transparent;
    color: var(--text-color);
    border: 1px solid var(--border-color);
    font-size: 0.9rem;
    cursor: pointer;
    transition: all 0.2s;
}

/* 選択時のスタイル（行全体ではなくボタンだけ光らせるならこれ） */
/* ユーザー要望：変更ボタン、メニュー画面のほかのボタンと同じ見た目でいいよ */
/* メニューアイテムはホバー/選択で背景が緑(border-color)になり、文字が黒(bg-color)になる */

.config-value.selected .config-change-btn {
    background: var(--border-color);
    color: var(--bg-color);
    font-weight: bold;
    border-color: var(--border-color);
}

/* 戻るボタンのスタイル */
/* 設定画面下部のボタンスタイル */
#config-default,
#config-back {
    display: block;
    margin: 0.5rem auto 0;
    padding: 0.5rem 2rem;
    background: transparent;
    color: var(--text-color);
    border: 1px solid var(--border-color);
    cursor: pointer;
    transition: all 0.2s;
    width: 200px;
    font-size: 1rem;
}

#config-default {
    margin-top: 2rem;
}

#config-default.selected,
#config-back.selected {
    background: var(--border-color);
    color: var(--bg-color);
    font-weight: bold;
}

.config-instruction {
    margin: 1rem 0;
    text-align: center;
    font-size: 0.85rem;
    color: #999;
}

.config-key-display.binding {
    border: 2px solid red !important;
    color: red !important;
    background-color: rgba(255, 0, 0, 0.1);
}